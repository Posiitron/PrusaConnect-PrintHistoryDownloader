<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prusa Print History Fetcher</title>
    
    <!-- Favicon (icon in the title) -->
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon16.png">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="content-wrapper">
            <header>
                <div class="title-section">
                    <!-- Icon next to the title -->
                    <img src="icons/icon16.png" alt="Prusa Icon" class="title-icon"> 
                    <h1>Print History <span class="accent">Extractor</span></h1>
                </div>
            </header>
            
            <main>
                <div class="description">
                    Extract print history from Prusa Connect and save it as a CSV file. Click the button below to start the extraction process.
                </div>

                <!-- Connection Status Section -->
                <div class="status-section">
                    <div class="connection-status" id="connection-status">
                        <span class="status-dot disconnected"></span>
                        <span class="status-text">Not connected</span>
                    </div>
                </div>

                <!-- Output Section: Show dynamic messages here -->
                <div class="output-container">
                    <!-- Default message, updated by JS -->
                    <pre id="output" class="output">Please navigate to Prusa Connect to use this extension.</pre>
                </div>

                <!-- Action Button -->
                <div class="actions">
                    <button id="fetch-data" class="btn primary" disabled>
                        <svg class="icon" viewBox="0 0 24 24" width="18" height="18">
                            <path fill="currentColor" d="M21.1,12.5L21.1,12.5c0,4.8-3.9,8.6-8.6,8.6s-8.6-3.9-8.6-8.6c0-4.8,3.9-8.6,8.6-8.6V1.3c-6.2,0-11.2,5-11.2,11.2s5,11.2,11.2,11.2s11.2-5,11.2-11.2H21.1z"/>
                        </svg>
                        Extract Data
                    </button>
                </div>

                <!-- Progress Bar (Initially Hidden) -->
                <div class="progress-container" id="progress-container" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress" id="progress-bar"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Waiting to start...</div>
                </div>

            </main>
        </div>

        <footer>
            <div class="author">By Posiitronâ˜•</div>
            <div class="version">v2.1.0</div>
        </footer>
    </div>
    
    <!-- Include the JS Scripts -->
    <script src="scripts/jszip.js"></script>
    <script src="popup.js"></script>
</body>
</html>
